# üñºÔ∏è –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º–∏ –≤ –≥–∞–ª–µ—Ä–µ–µ

## –ü—Ä–æ–±–ª–µ–º–∞: –ö–∞—Ä—Ç–∏–Ω–∫–∏ –Ω–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

### üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12) –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã `/galery`.

---

## ‚úÖ –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –¥–æ–±–∞–≤–ª–µ–Ω –ª–∏ –∫–æ–Ω—Ç–µ–Ω—Ç –≤ Strapi

### 1.1 –û—Ç–∫—Ä–æ–π—Ç–µ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å Strapi

```
http://localhost:1337/admin
```

### 1.2 –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Content Manager

```
Content Manager ‚Üí Gallery (Single Types)
```

### 1.3 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å

- –ï—Å–ª–∏ –≤—ã –≤–∏–¥–∏—Ç–µ –ø—É—Å—Ç—É—é —Ñ–æ—Ä–º—É ‚Üí –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω
- –ï—Å–ª–∏ —Ñ–æ—Ä–º–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞, –Ω–æ –µ—Å—Ç—å –∫–Ω–æ–ø–∫–∞ "Publish" ‚Üí –∫–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω
- –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å "Published" ‚Üí –∫–æ–Ω—Ç–µ–Ω—Ç –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω ‚úÖ

### 1.4 –î–æ–±–∞–≤—å—Ç–µ/–û–ø—É–±–ª–∏–∫—É–π—Ç–µ –∫–æ–Ω—Ç–µ–Ω—Ç

1. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ø–æ–ª—è:
   - **Title**: "–ì–∞–ª–µ—Ä–µ—è Hi-Catering"
   - **Description**: "–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –Ω–∞—à–∏—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π"
   
2. **Images** - –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è:
   - –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ø–æ–ª–µ "Images"
   - –ù–∞–∂–º–∏—Ç–µ "Add new assets"
   - –í—ã–±–µ—Ä–∏—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Å –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
   - –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≥—Ä—É–∑–∫–∏ (–ø–æ—è–≤–∏—Ç—Å—è –ø—Ä–µ–≤—å—é)
   
3. –ù–∞–∂–º–∏—Ç–µ **Save**

4. –ù–∞–∂–º–∏—Ç–µ **Publish** (–ø—Ä–∞–≤—ã–π –≤–µ—Ä—Ö–Ω–∏–π —É–≥–æ–ª)

---

## ‚úÖ –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API

### 2.1 –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ curl:

```bash
curl http://localhost:1337/api/gallery?populate=images
```

### 2.2 –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:

```json
{
  "data": {
    "id": 1,
    "title": "–ì–∞–ª–µ—Ä–µ—è Hi-Catering",
    "description": "–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –Ω–∞—à–∏—Ö –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏–π",
    "images": [
      {
        "id": 1,
        "url": "/uploads/photo_123abc.jpg",
        "formats": {
          "thumbnail": { "url": "/uploads/thumbnail_photo_123abc.jpg" },
          "small": { "url": "/uploads/small_photo_123abc.jpg" },
          "medium": { "url": "/uploads/medium_photo_123abc.jpg" }
        }
      }
    ]
  }
}
```

### 2.3 –ï—Å–ª–∏ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç—Å—è:

**`{"data": null}`** ‚Üí –ö–æ–Ω—Ç–µ–Ω—Ç –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω –∏–ª–∏ –Ω–µ –æ–ø—É–±–ª–∏–∫–æ–≤–∞–Ω

**`403 Forbidden`** ‚Üí –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (–∑–∞–ø—É—Å—Ç–∏—Ç–µ `npm run setup:gallery-permissions`)

**`404 Not Found`** ‚Üí Backend –Ω–µ –∑–∞–ø—É—â–µ–Ω –∏–ª–∏ –∫–æ–Ω—Ç–µ–Ω—Ç-—Ç–∏–ø –Ω–µ —Å–æ–∑–¥–∞–Ω

---

## ‚úÖ –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç–∏ –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º

### 3.1 –û—Ç–∫—Ä–æ–π—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≥–∞–ª–µ—Ä–µ–∏ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

```
http://localhost:3000/galery
```

### 3.2 –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞ (F12 ‚Üí Console)

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –ª–æ–≥–∏:

```
[Gallery Page] API response: { ... }
[Gallery] Image 0: { original: "/uploads/...", thumbnail: "http://localhost:1337/uploads/..." }
```

### 3.3 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ Network tab (F12 ‚Üí Network)

–ù–∞–π–¥–∏—Ç–µ –∑–∞–ø—Ä–æ—Å—ã –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º:
- –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å **200** ‚Üí –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è ‚úÖ
- –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å **404** ‚Üí –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –Ω–∞–π–¥–µ–Ω—ã –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
- –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å **ERR_BLOCKED** ‚Üí –ø—Ä–æ–±–ª–µ–º–∞ —Å CORS –∏–ª–∏ Next.js config

---

## ‚úÖ –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é uploads

### 4.1 –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ —Ñ–∞–π–ª–æ–≤:

```bash
ls -la backend/public/uploads/
```

–í—ã –¥–æ–ª–∂–Ω—ã —É–≤–∏–¥–µ—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.

### 4.2 –ï—Å–ª–∏ –ø–∞–ø–∫–∞ –ø—É—Å—Ç–∞—è:

–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ Strapi. –í–µ—Ä–Ω–∏—Ç–µ—Å—å –∫ **–®–∞–≥—É 1**.

---

## ‚úÖ –®–∞–≥ 5: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã

### 5.1 –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –æ–±–∞ —Å–µ—Ä–≤–∏—Å–∞ (Ctrl+C)

### 5.2 –û—á–∏—Å—Ç–∏—Ç–µ –∫–µ—à:

```bash
# Backend
cd backend
rm -rf .cache
rm -rf build

# Frontend
cd ../apps/web
rm -rf .next
```

### 5.3 –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ:

```bash
# Terminal 1 - Backend
cd backend
npm run develop

# Terminal 2 - Frontend
cd apps/web
npm run dev
```

---

## üêõ –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è, –Ω–æ –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** Next.js –Ω–µ –º–æ–∂–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

**–†–µ—à–µ–Ω–∏–µ:** –£–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ - –¥–æ–±–∞–≤–ª–µ–Ω `unoptimized={true}` –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –û—à–∏–±–∫–∞ "Invalid src prop"

**–ü—Ä–∏—á–∏–Ω–∞:** URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ `apps/web/.env.local`:

```env
NEXT_PUBLIC_STRAPI_URL=http://localhost:1337
NEXT_PUBLIC_API_URL=http://localhost:1337/api
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: CORS –æ—à–∏–±–∫–∏

**–ü—Ä–∏—á–∏–Ω–∞:** Backend –Ω–µ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã —Å frontend

**–†–µ—à–µ–Ω–∏–µ:** –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `backend/config/middlewares.ts`:

```typescript
{
  name: 'strapi::cors',
  config: {
    origin: ['http://localhost:3000'],
  },
}
```

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—á–µ–Ω—å –±–æ–ª—å—à–∏–µ –∏ –¥–æ–ª–≥–æ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:** –ó–∞–≥—Ä—É–∂–µ–Ω—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–æ–º —Ä–∞–∑–º–µ—Ä–µ

**–†–µ—à–µ–Ω–∏–µ:** 
- Strapi –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–µ—Ç thumbnail/small/medium –≤–µ—Ä—Å–∏–∏
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –∫–æ–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `thumbnailUrl` (—É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ)
- –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ä–∞–∑–º–µ—Ä: 1920x1080)

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è–º

### –û–ø—Ç–∏–º–∞–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:

- **–§–æ—Ä–º–∞—Ç:** JPEG –∏–ª–∏ WebP
- **–†–∞–∑–º–µ—Ä:** 1920x1080px (Full HD)
- **–ö–∞—á–µ—Å—Ç–≤–æ:** 80-85%
- **–í–µ—Å:** –¥–æ 500KB –Ω–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ

### –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:

- [TinyPNG](https://tinypng.com/) - –æ–Ω–ª–∞–π–Ω —Å–∂–∞—Ç–∏–µ
- [Squoosh](https://squoosh.app/) - –ø—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π –æ–Ω–ª–∞–π–Ω —Ä–µ–¥–∞–∫—Ç–æ—Ä
- ImageMagick, Sharp - CLI –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã

---

## üîç –¢–µ—Å—Ç–æ–≤–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å

–í—ã–ø–æ–ª–Ω–∏—Ç–µ –ø–æ –ø–æ—Ä—è–¥–∫—É:

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ backend
curl http://localhost:1337/api/gallery?populate=images

# 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∞–π–ª–æ–≤
ls -la backend/public/uploads/

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
cd backend && npm run setup:gallery-permissions

# 4. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ —Å–µ—Ä–≤–∏—Å—ã (Ctrl+C)
cd backend && npm run develop
# –í –Ω–æ–≤–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ
cd apps/web && npm run dev

# 5. –û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä
# http://localhost:3000/galery
# F12 ‚Üí Console (–ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏)
```

---

## üìû –ï—Å–ª–∏ –Ω–∏—á–µ–≥–æ –Ω–µ –ø–æ–º–æ–≥–ª–æ

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–µ—Ä—Å–∏—é Node.js: `node -v` (–¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å 18+)
2. –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
   ```bash
   cd backend && rm -rf node_modules && npm install
   cd ../apps/web && rm -rf node_modules && npm install
   ```
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Strapi: `backend/.tmp/data.db`

---

**–°–æ–∑–¥–∞–Ω–æ:** 08.11.2025  
**–í–µ—Ä—Å–∏—è:** 1.0.0

